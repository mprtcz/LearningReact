(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{18:function(e,t,a){e.exports=a(29)},23:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(16),o=a.n(r),c=(a(23),a(5)),u=function(){return l.a.createElement("nav",{className:"navbar"},l.a.createElement("h1",null,"The Dojo Blog"),l.a.createElement("div",{className:"links"},l.a.createElement(c.b,{to:"/"},"Home"),l.a.createElement(c.b,{to:"/create",style:{color:"white",backgroundColor:"#f1356d",borderRadius:"8px"}},"New Blog")))},i=function(e){var t=e.blogs,a=e.title;return l.a.createElement("div",{className:"blog-list"},l.a.createElement("h2",null,a),t.map((function(e){return l.a.createElement("div",{className:"blog-preview",key:e.id},l.a.createElement(c.b,{to:"blogs/".concat(e.id)},l.a.createElement("h2",null,e.title),l.a.createElement("p",null,"Written by ",e.author)))})))},m=a(7),s=function(e){var t=Object(n.useState)(null),a=Object(m.a)(t,2),l=a[0],r=a[1],o=Object(n.useState)(!0),c=Object(m.a)(o,2),u=c[0],i=c[1],s=Object(n.useState)(null),E=Object(m.a)(s,2),d=E[0],h=E[1];return Object(n.useEffect)((function(){var t=new AbortController;return setTimeout((function(){fetch(e,{signal:t.signal}).then((function(e){if(console.log(e),!e.ok)throw new Error("Counld fetch the response");return e.json()})).then((function(e){h(null),r(e),i(!1)})).catch((function(e){"AbortError"===e.name?console.log("fetch aborted"):(i(!1),console.log(e.message),h(e.message))}))}),300),function(){return t.abort()}}),[]),{data:l,isPending:u,error:d}},E=function(){var e=s("http://localhost:8000/blogs"),t=e.data,a=e.isPending,n=e.error;return l.a.createElement("div",{className:"home"},n&&l.a.createElement("div",null,n),a&&l.a.createElement("div",null,"Loading"),t&&l.a.createElement(i,{blogs:t,title:"All blogs"}))},d=a(1),h=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(""),c=Object(m.a)(o,2),u=c[0],i=c[1],s=Object(n.useState)("mario"),E=Object(m.a)(s,2),h=E[0],b=E[1],g=Object(n.useState)(!1),f=Object(m.a)(g,2),p=f[0],v=f[1],j=Object(d.f)();return l.a.createElement("div",{className:"create"},l.a.createElement("h2",null,"Add a new content"),l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={title:a,body:u,author:h};v(!0),fetch("http://localhost:8000/blogs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(){v(!1),j.push("/")}))}},l.a.createElement("label",null,"Blog title:"),l.a.createElement("input",{type:"text",required:!0,value:a,onChange:function(e){return r(e.target.value)}}),l.a.createElement("label",null,"Blog body:"),l.a.createElement("textarea",{required:!0,value:u,onChange:function(e){return i(e.target.value)}}),l.a.createElement("label",null,"Blog author:"),l.a.createElement("select",{value:h,onChange:function(e){return b(e.target.value)}},l.a.createElement("option",{value:"mario"},"Mario"),l.a.createElement("option",{value:"yoshi"},"Yoshi")),p&&l.a.createElement("button",{disabled:!0},"Adding blog..."),!p&&l.a.createElement("button",null,"Add Blog"),l.a.createElement("p",null,a),l.a.createElement("p",null,u),l.a.createElement("p",null,h)))},b=function(){var e=Object(d.g)().id,t=Object(d.f)(),a=s("http://localhost:8000/blogs/"+e),n=a.data,r=a.error,o=a.isPending;return l.a.createElement("div",{className:"blog-details"},o&&l.a.createElement("div",null,"Loading..."),r&&l.a.createElement("div",null,"Error fetching the data: ",r),n&&l.a.createElement("article",null,l.a.createElement("h2",null,n.title),l.a.createElement("p",null,"Written by ",n.author),l.a.createElement("div",null,n.body),l.a.createElement("button",{onClick:function(){fetch("http://localhost:8000/blogs/"+n.id,{method:"DELETE"}).then((function(){t.push("/")}))}},"Delete")))},g=function(){return l.a.createElement("div",{className:"not-found"},l.a.createElement("h2",null,"Sorry"),l.a.createElement("p",null,"That page cannot be found"),l.a.createElement(c.b,{to:"/"},"Back to the homepage..."))};var f=function(){return l.a.createElement(c.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(u,null),l.a.createElement("div",{className:"content"},l.a.createElement(d.c,null,l.a.createElement(d.a,{exact:!0,path:"/create"},l.a.createElement(h,null)),l.a.createElement(d.a,{exact:!0,path:"/"},l.a.createElement(E,null)),l.a.createElement(d.a,{exact:!0,path:"/blogs/:id"},l.a.createElement(b,null)),l.a.createElement(d.a,{exact:!0,path:"*"},l.a.createElement(g,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(f,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.571eb641.chunk.js.map